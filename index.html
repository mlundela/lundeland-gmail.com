<html>

<head>
    <title>Tipperekker</title>
</head>

<body>
    <!-- <canvas id="myCanvas" width="360" height="360" style="border: 1px solid #ccc;"></canvas> -->
    <canvas id="myCanvas" width="1200" height="800" style="border: 1px solid #ccc;"></canvas>
    <script src="main.js" type="text/javascript"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {

            var canvas = document.getElementById("myCanvas");
            var ctx = canvas.getContext("2d");

            // ctx.fillStyle = "#000000";
            // ctx.clearRect(0, 0, 900, 450);

            var matches = [
                [65, 17, 18],
                [48, 27, 25],
                [34, 21, 45],
                [41, 28, 31],
                [36, 26, 38],
                [50, 25, 25],
                [49, 24, 27],
                [36, 27, 37],
                [51, 24, 25],
                [60, 19, 21],
                [38, 29, 33],
                [42, 28, 30],
            ];

            // Kor mange rekker i kvar rute: 3 ** level
            var level = 8;


            // var ps = calculateProbabilities(matches)
            // var m = toMatrix(ps, parseInt(level))


            // drawMatrix(m, canvasSize);
            drawHistogram(m, 1200, 800);


            function drawHistogram(m, canvasWidth, canvasHeight) {
                var max = m[0].total.count;
                ctx.fillStyle = "rgba(255,0,0,0.8)";
                for (var i = 0; i < 9; i++) {
                    for (var j = 0; j < 9; j++) {
                        var n = i * 9 + j;
                        var height = canvasHeight * m[n].selected.count / max;
                        var x = canvasWidth * n / 81;
                        var y = canvasHeight - height;
                        ctx.fillRect(x, y, canvasWidth / 81, height);
                    }
                }
            }

            function drawMatrix(m, canvasSize) {
                var cellSize = canvasSize / 9;
                var max = m[0];
                var min = 0
                for (var i = 0; i < 9; i++) {
                    for (var j = 0; j < 9; j++) {
                        var r = 255;
                        var g = 0;
                        var b = 0;
                        var x = (m[i * 9 + j] - min) / (max - min);
                        var a = 225 * x;
                        ctx.fillStyle = "rgba(" + r + "," + g + "," + b + "," + (a / 255) + ")";
                        ctx.fillRect(i * cellSize, j * cellSize, cellSize, cellSize);
                    }
                }
            }




        }, false);


    </script>
</body>

</html>